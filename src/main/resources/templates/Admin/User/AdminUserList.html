<!-- íšŒì› ëª©ë¡ -->
<div xmlns:th="http://www.thymeleaf.org" >
<div class="bg-white shadow p-6 rounded-md">
    <h2 class="text-xl font-bold text-gray-700 mb-4">íšŒì› ëª©ë¡</h2>
    <table class="w-full border-collapse border border-gray-200">
        <thead>
            <tr class="bg-gray-100">
                <th class="border p-2 text-center">ê°€ì…ì¼</th>
                <th class="border p-2 text-center">ID</th>
                <th class="border p-2 text-center">ì‚¬ìš©ì—¬ë¶€</th>
                <th class="border p-2 text-center">ë³„ëª…</th>
                <th class="border p-2 text-center">ì—­í• </th>
                <th class="border p-2 text-center">ë¡œê·¸ì¸ íšŸìˆ˜</th>
                <th class="border p-2 text-center">ë§ˆì§€ë§‰ ë¡œê·¸ì¸</th>
                <th class="border p-2 text-center">ìµœê·¼ ë¡œê·¸ì¸ ì‹¤íŒ¨</th>
            </tr>
        </thead>
        <tbody>
            <tr th:unless="${#lists.isEmpty(users)}"
            	th:each="item : ${users}" th:data-user-no="${item.userNo}">
                <td class="border p-2 text-center" th:text="${#temporals.format(item.regDate,'yyyy.MM.dd HH:mm')}"></td>
                <td class="border p-2 id-cell underline cursor-pointer" th:text="${item.id}"></td>
                <td class="border p-2 text-center" th:text="${item.enabled? 'ğŸŸ¢':'ğŸ”´'}"></td>
                <td class="border p-2" th:text="${item.nickname}"></td>
                <td class="border p-2 text-center" th:text="${item.role}"></td>
                <td class="border p-2 text-right" th:text="${#numbers.formatDecimal(item.loginCount, 0, 'COMMA', 0, 'POINT')}"></td>
                <td class="border p-2 text-center" th:text="${#temporals.format(item?.lastLoginTime,'yyyy.MM.dd HH:mm')}"></td>
                <td class="border p-2 text-right" th:text="${#numbers.formatDecimal(item.loginFailCount, 0, 'COMMA', 0, 'POINT')}"></td>
            </tr>
        </tbody>
    </table>
</div>

<script th:inline="javascript">

    document.querySelectorAll('.id-cell').forEach(idCell => {
        idCell.addEventListener('click', function() {
            const row = this.parentNode;
            const userNo = row.dataset.userNo;
            
            const params = new URLSearchParams({
        		userNo: userNo || ''
        	});
            
            const url = /*[[@{/Admin/User/Profile.layer}]]*/ null;
            const urlValue = url + '?' + params.toString();
            
            const sendValue = {
			        url: urlValue,
					method: MethodType.Get,
			        contentType: ContentsType.Form, // ê¸°ë³¸ê°’: JSON
			        popupId:'Profile',
			        width: '800px'
			    };
            
            openPopup( sendValue );
        });
    });
</script>
</div>
<div xmlns:th="http://www.thymeleaf.org"
     xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
     layout:decorate="~{Admin/Common/AdminLayout}">

    <th:block layout:fragment="title">그룹 회원 관리</th:block>

    <th:block layout:fragment="css"></th:block>

    <div layout:fragment="content">
        <!-- 회원 검색 -->
        <div class="bg-white shadow p-6 rounded-md mb-6">
            <h2 class="text-xl font-bold text-gray-700 mb-4">그룹 검색</h2>
            <div class="flex space-x-4">
                <input type="text" id="searchName" placeholder="그룹 이름 입력"
                       class="border p-2 rounded w-1/3 focus:outline-none focus:ring-2 focus:ring-blue-600">
                <button type="button" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700" onclick="search()">검색</button>
                <button type="button" class="bg-green-600 text-white p-2 rounded hover:bg-green-700" onclick="onGroupDetail(0)">추가</button>
            </div>
        </div>

        <!-- 그룹 목록 -->
        <div id="ResultList"></div>
    </div>

    <th:block layout:fragment="script">
    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', () => {
            search();
        });
        
        
        async function search(){
        	
        	const searchName = document.getElementById('searchName').value;
        	
        	const params = new URLSearchParams({
        		grName: searchName || ''
        	});

        	const options = {
        			method: 'GET',
        			headers: {
        				'Content-Type': 'application/x-www-form-urlencoded',
        			},
        	    };
        	
        	const url = /*[[@{/Admin/Group/GroupUserList.layer}]]*/ null;
        	const urlAddress = url + '?' + params.toString();
        	
        	doSearchList(urlAddress, options, 'ResultList');
        };
        
        function onGroupDetail(groupNo){
        	const url = /*[[@{/Admin/Group/GroupItem.layer}]]*/ null;
            const urlValue = url + '?groupNo=' + groupNo;
            
            const sendValue = {
			        url: urlValue,
					method: MethodType.Get,
			        contentType: ContentsType.Form, // 기본값: JSON
			        popupId:'Profile',
			        width: '800px'
			    };
            
            openPopup( sendValue );
        }
    </script>
    </th:block>

</div>
<div xmlns:th="http://www.thymeleaf.org" th:fragment="content">
    <div class="space-y-6">
        <h2 class="text-2xl font-semibold text-center text-gray-800">관리자 계정 설정</h2>
        <div class="space-y-4">
            <div>
                <label class="block text-sm text-gray-700">ID</label>
                <input type="text" value="admin" readonly class="mt-1 w-full border-gray-300 rounded-lg shadow-sm"/>
            </div>
            <div>
                <label class="block text-sm text-gray-700">패스워드</label>
                <input type="password" id="pwd1" name="passwd" maxlength="32" autocomplete="off"
	               class="w-full p-2 pr-6 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-400"
	               placeholder="Password" >
            </div>
            <div>
                <label class="block text-sm text-gray-700">패스워드 확인</label>
                <input type="password" id="pwd2" oninput="checkPasswordMatch()" maxlength="32" autocomplete="off"
	               class="w-full p-2 pr-6 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-400"
	               placeholder="Password 확인" />
            </div>
            <p id="pwdMsg" class="text-red-500 text-sm"></p>
            <ul class="text-xs text-gray-500 list-disc pl-4">
                <li>패스워드는 잊어버리면 다시 찾을 수 없습니다.</li>
                <li>관리자 계정 ID는 변경할 수 없습니다.</li>
                <li>패스워드가 일치하지 않으면 다음 단계로 진행할 수 없습니다.</li>
            </ul>
        </div>
        <div class="flex justify-between">
            <button type="button" class="bg-gray-300 text-gray-800 px-6 py-2 rounded hover:bg-gray-400 transition" onclick="prevPage('page3', 'page2')">이전</button>
            <button type="button" disabled id="pwNextBtn" class="bg-gray-500 text-black px-6 py-2 rounded hover:bg-gray-600 transition" onclick="nextPage('page3', 'page4')">다음</button>
        </div>
    </div>
    
    <script>
        function checkPasswordMatch() {
            // for test
            buttonStatus( true );
            
        }
        
        function checkPasswordMatch2() {
            const pwd1 = document.getElementById('pwd1').value;
            const pwd2 = document.getElementById('pwd2').value;
            const msg = document.getElementById('pwdMsg');

            // 조건: 비어있음
            if (!pwd1 || !pwd2) {
                msg.textContent = '◆ 패스워드를 입력하세요.';
                buttonStatus(false);
                return false;
            }

            // 조건: 길이
            if (pwd1.length < 8 || pwd1.length > 64) {
                msg.textContent = '◆ 패스워드는 8자 이상 64자 이하로 입력하세요.';
                buttonStatus(false);
                return false;
            }

            // 조건: 일치 여부
            if (pwd1 !== pwd2) {
                msg.textContent = '◆ 패스워드가 일치하지 않습니다.';
                buttonStatus(false);
                return false;
            }

            // 조합 조건: 영문대소문자, 숫자, 특수문자 중 2종류 이상 포함
            const hasLower = /[a-z]/.test(pwd1);
            const hasUpper = /[A-Z]/.test(pwd1);
            const hasNumber = /[0-9]/.test(pwd1);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>_\-+=~`\[\]\\\/]/.test(pwd1);

            const count = [hasLower || hasUpper, hasNumber, hasSpecial].filter(Boolean).length;

            if (count < 2) {
                msg.textContent = '◆ 영문, 숫자, 특수문자 중 두 가지 이상 조합해야 합니다.';
                buttonStatus(false);
                return false;
            }

            // 성공
            msg.textContent = '';
            buttonStatus(true);
            return true;
        }

        
        function buttonStatus( status ){
        	const pwNextBtn = document.getElementById("pwNextBtn")
    		if( status ){
    			pwNextBtn.disabled = false;
    			pwNextBtn.classList.remove("bg-gray-500", "text-black", "hover:bg-gray-600");
    			pwNextBtn.classList.add("bg-blue-500", "text-white", "hover:bg-blue-600");
    		}else{
    			pwNextBtn.disabled = true;
    			pwNextBtn.classList.remove("bg-blue-500", "text-white", "hover:bg-blue-600");
    			pwNextBtn.classList.add("bg-gray-500", "text-black", "hover:bg-gray-600");
    		}
        }
        
    </script>
</div>

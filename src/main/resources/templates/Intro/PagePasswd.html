<div xmlns:th="http://www.thymeleaf.org" th:fragment="content">
    <div class="space-y-6">
        <h2 class="text-2xl font-semibold text-center text-gray-800">관리자 계정 설정</h2>
        <div class="space-y-4">
	        <table class="w-full border-collapse">
			    <tbody>
		            <tr>
		                <td class="w-1/4 font-medium p-2"><label for="id">아이디</label></td>
		                <td class="w-3/4 p-2">
		                    <input type="text" readonly id="id" required
		                    	class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-400"  
		                    	th:value="${T(com.utime.burrowNest.user.dao.UserDao).AdminId}" >
		                </td>
		            </tr>
		            <tr>
		                <td class="font-medium p-2">비밀번호</td>
		                <td class="p-2">
		                    <input type="password" id="password" placeholder="숫자, 영문, 특수문자 중 2가지 이상" onblur="confirmJoinInput()"
		                    	class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-400" minlength="6" maxlength="20" required>
		                    <p id="passwordError" class="text-sm text-red-500 mt-1 hidden">비밀번호 규칙을 확인하세요.</p>
		                </td>
		            </tr>
		            <tr>
		                <td class="font-medium p-2">비밀번호 확인</td>
		                <td class="p-2">
		                    <input type="password" id="confirmPassword" placeholder="최소 6자, 최대 20자" onblur="confirmJoinInput()"
		                    	class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-400" required>
		                    <p id="confirmPasswordError" class="text-sm text-red-500 mt-1 hidden">비밀번호가 일치하지 않습니다.</p>
		                </td>
		            </tr>
		            <tr>
		                <td class="font-medium p-2">닉네임</td>
		                <td class="p-2 flex items-center">
		                	<input type="text" id="nickname" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-400" minlength="1" maxlength="20" required>
		                	<div class="relative ml-4">
	                			<script th:replace="~{Common/ProfileImg :: JoinImageEle}"></script>
		                	</div>
		                </td>
		            </tr>
					
					<th:block th:replace="~{Auth/AuthHint :: AuthHint}"></th:block>
		        </tbody>
		    </table>
        </div>
        <div class="flex justify-between">
            <button type="button" class="bg-gray-300 text-gray-800 px-6 py-2 rounded hover:bg-gray-400 transition" onclick="prevPage('PagePasswd', 'PageAgree')">이전</button>
            <button type="button" disabled id="pwNextBtn" class="bg-gray-500 text-black px-6 py-2 rounded hover:bg-gray-600 transition" onclick="nextPage('PagePasswd', 'PageStorageLib')">다음</button>
        </div>
    </div>
    
    <script th:replace="~{Common/ProfileImg :: script}"></script>
    
    <script>
	    function confirmJoinInput(){
			const password = document.getElementById("password").value;
	        const confirmPassword = document.getElementById("confirmPassword").value;
	        const passwordError = document.getElementById("passwordError");
	        const confirmPasswordError = document.getElementById("confirmPasswordError");
	        
	        // 비밀번호 검사 (숫자, 영문, 특수문자 중 2가지 이상 포함)
	        const hasNumber = /[0-9]/.test(password);
	        const hasLetter = /[a-zA-Z]/.test(password);
	        const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
	        const isValidPassword = (hasNumber && hasLetter) || (hasNumber && hasSpecial) || (hasLetter && hasSpecial);
	
	        if (!isValidPassword || password.length < 6 || password.length > 20) {
	            passwordError.classList.remove("hidden");
	            buttonStatus( "pwNextBtn", false );
	            return;
	        } else {
	            passwordError.classList.add("hidden");
	        }
	
	        if( password.length > 0 & confirmPassword.length > 0 ){
	            // 비밀번호 확인 검사
	            if (password !== confirmPassword) {
	                confirmPasswordError.classList.remove("hidden");
	                buttonStatus( "pwNextBtn", false );
	                return;
	            } else {
	                confirmPasswordError.classList.add("hidden");
	            }
	        }
	        
	        const rainbow = document.getElementById("myRainbow").value;
	        const season = document.getElementById("mySeason").value;
	        const num = document.getElementById("myNumber").value;

	        buttonStatus( "pwNextBtn", (rainbow.trim() !== "" && season.trim() !== "" && num.trim() !== "") );
		}
        
	    document.getElementById("myRainbow").addEventListener("blur", confirmJoinInput);
	    document.getElementById("mySeason").addEventListener("blur", confirmJoinInput);
	    document.getElementById("myNumber").addEventListener("blur", confirmJoinInput);
	    
    </script>
</div>
